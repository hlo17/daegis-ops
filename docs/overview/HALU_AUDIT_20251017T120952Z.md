# Halu Audit (20251017T120952Z)

## 1) agent.md / å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«æ¢ç´¢
 - docs/agents/halu/agent.md (present)

## 2) ãƒªãƒã‚¸ãƒˆãƒªå†…ã® Halu é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ‘ã‚¹ã ã‘ï¼‰
 - config/halu_modes.yaml:4:  default: { route: "Halu" }
 - metrics/lyra_mode.prom:7:lyra_mode_count{mode="Halu"} 0
 - bridges/obsidian/derived/dashboard_ad5f9xd.json:109:          "expr": "time() - daegis_memory_last_update_timestamp{agent=~\"Lyra|Kai|Halu|Memory\"}",
 - inbox/window/20251012T185812Z_dna_schema_result.md:22:- Halu Rely çµ±åˆã‚¹ã‚­ãƒ¼ãƒ è¨­è¨ˆã¸ æ©‹æ¸¡ã—å¯èƒ½
 - inbox/window/20251017T120136Z_halu_audit_result.md:4:topic: "Halu Audit â€” ç¾å­˜ãƒ‘ã‚¹/è¨¼è·¡ã®æ£šå¸ã—ï¼ˆDRYï¼‰"
 - inbox/window/20251017T120136Z_halu_audit_result.md:12:- Halué–¢é€£ã®å®šç¾©/ãƒ¡ãƒˆãƒªã‚¯ã‚¹/ç›£æŸ»/WORM/ãƒŸãƒ©ãƒ¼ã®ç—•è·¡ã‚’1æšã«é›†ç´„ï¼ˆç ´å£Šãªã—ï¼‰
 - inbox/window/20251017T120609Z_halu_hardening_v1_done.md:4:topic: "Halu Hardening v1ï¼ˆDRYï¼‰â€” SOTå›ºå®šãƒ»Sentryãƒ»Routerå°å…¥"
 - inbox/window/20251017T120609Z_halu_hardening_v1_done.md:11:- Haluæœ€å°SOTï¼ˆagent.md / halu.prom / relay stub / configï¼‰ã‚’å›ºå®šã€‚WORM/busã‚’æ–°è¨­ã€‚
 - inbox/window/20251017T120609Z_halu_hardening_v1_done.md:12:- `halu_sentry.sh`ã§å­˜åœ¨ãƒ»é®®åº¦ã‚’ç›£è¦–ã—ã€`:9091`ã¸å¸¸æ™‚é¡å‡ºï¼ˆdaegis_halu_sentry_ok ç­‰ï¼‰ã€‚
 - inbox/window/20251017T113132Z_ack_state_sync.md:18:- Kaiã¯ Halu :9091 é¡å‡ºï¼ˆDRY, textfile: logs/prom/halu.promï¼‰ã‚’å®Ÿæ–½ã€‚
 - inbox/window/20251017T113509Z_halu_9091_mirror_result.md:4:topic: "Halu :9091 é¡å‡ºï¼ˆDRYï¼‰ â€” ç‚¹ç¯ãƒ»è¨¼è·¡æå‡º"
 - inbox/window/20251017T113509Z_halu_9091_mirror_result.md:12:- :9091 ã« daegis_halu_* ãŒç‚¹ç¯ï¼ˆpass_ratio/cases/æƒ…å ±ãƒ©ãƒ™ãƒ«ï¼‰
 - inbox/window/20251017T113509Z_halu_9091_mirror_result.md:24:{"ts":"2025-10-17T11:34:59Z","test":"HaluEvalLowPassRate","mode":"DRY","result":"would_fire_then_resolve","note":"pass_ratio<0.70 for 10m (simulated)"}
 - ops/prom_text/daegis_memory.prom:4:daegis_memory_last_update_timestamp{agent="Halu"} 0
 - ops/ward/Daegis-Ward.md:45:- defaults: SENTRY=on, WSS/ACAP/SlackDigest/HaluRelay=off (ops/policies/toggles.env)
 - ops/ward/Daegis-Ward.md:185:## Halu setup snapshot (20251006-181604)
 - ops/ward/Daegis-Ward.md:190:## Halu setup snapshot (2025-10-06T18:18:18+0900)
 - ops/ward/audit-halu-20251006-213459.md:1:# Halu Audit (2025-10-06T21:34:59+09:00)
 - ops/prom_text/relay_heartbeat.prom:1:relay_last_update_seconds{agent="Halu"} 1760400598
 - ops/grafana/memory_observer_dashboard.json:16:          { "expr": "(time() - daegis_memory_last_update_timestamp{agent=~\"Lyra|Kai|Halu|Memory\"}) / 60",
 - ops/tools/seed.sh:11:- Architecture: Halu (core KB) + Sora (interface)
 - ops/runbooks/chronicles/Daegis Chronicle 2025-09-28.md:41:- Halu-RAG ä¿®æ­£ â†’ ãƒ†ã‚¹ãƒˆ 5/5 GREEN
 - ops/runbooks/hand-offs/Daegis Hand-off 2025-09-28.md:4:- **Scope**: Haluãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆBrokerâ†’Relayâ†’Scribeâ†’Ledger/Slackï¼‰å®‰å®šåŒ–ãƒ»é‹ç”¨åŸºç›¤æ•´å‚™ï¼ˆSentry/Runbook/GitHubï¼‰
 - ops/runbooks/hand-offs/Daegis Hand-off 2025-09-28.md:55:ğŸ“Œ **Status**: Haluãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®è¦³æ¸¬ãƒ»åˆ‡ã‚Šåˆ†ã‘ã¯å®‰å®šã€‚æ¬¡ã¯**é€šçŸ¥ã®è²«é€š**ã¨**é‡è¤‡åˆ¤å®šã®æ’ä¹…åŒ–**ã€‚
 - ops/runbooks/Daegis-Runbook.md:38:- Core Agents â†’ Halu, Grok, Perplexity, Gemini, ChatGPT, NotebookLM
 - ops/runbooks/Daegis-Runbook.md:39:- Interaction â†’ Slack + (Halu Relay: OFF until Slack digest wired)
 - ops/runbooks/Daegis-Runbook.md:45:Sentry=ON / WSS=OFF / ACAP=OFF / SlackDigest=OFF / HaluRelay=OFF
 - ops/runbooks/Daegis-Runbook.md:51:**è¦ç´„**: Daegisã¯AIé¨å£«å›£ã‚’ä¸­å¿ƒã¨ã—ãŸè‡ªå¾‹å‹æƒ…å ±å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã€‚MQTT Busã‚’ç¥çµŒç³»ã€Slackã‚’å††å“ã¨ã™ã‚‹æœ€å°å›½å®¶æ§‹æƒ³ã€‚é€²æ—: M3å®Œäº†ã€M4/M5é€²è¡Œä¸­ã€‚å¼±ç‚¹å¯¾å‡¦å„ªå…ˆã§ã€Halu Relayæ´»æ€§åŒ–ã‚’å³æ™‚å®Ÿæ–½ã€‚  
 - ops/runbooks/Daegis-Runbook.md:55:- **å³æ™‚(1h)**: Slack #daegis-roundtable å¬é›†ï¼ˆACAPãƒ†ãƒ³ãƒ—ãƒ¬ä½¿ç”¨ï¼‰ã€‚Halu Relay PoCå†å®Ÿè¡Œï¼ˆMQTTâ†’Slackï¼‰ã€‚
 - ops/runbooks/Daegis-Runbook.md:63:- **Daegis Factory**: DAGã‚¿ã‚¹ã‚¯ï¼ˆplanâ†’publishï¼‰ğŸš§ï¼ˆHalué€£æºï¼‰
 - ops/runbooks/Daegis-Runbook.md:75:- **Halu + (Halu Relay / Knowledge Engine)**: è­°é•·ãƒ»ä¸­ç¶™ãƒ»RAG âœ…/âŒï¼ˆRelayæ´»æ€§åŒ–å„ªå…ˆï¼‰
 - ops/setup-halu.sh:55:    echo "## Halu setup snapshot ($TS)"
 - logs/prom/halu.prom:1:# HELP daegis_halu_sentry_ok 1=healthy 0=problem
 - logs/prom/halu.prom:2:# TYPE daegis_halu_sentry_ok gauge
 - logs/prom/halu.prom:3:daegis_halu_sentry_ok 1
 - logs/prom/halu.prom:4:# HELP daegis_halu_textfile_age_seconds seconds since halu.prom last write
 - logs/prom/halu.prom:5:# TYPE daegis_halu_textfile_age_seconds gauge
 - logs/prom/halu.prom:6:daegis_halu_textfile_age_seconds 238
 - logs/prom/halu.prom:7:# HELP daegis_halu_eval_pass_ratio_1h Halu pass ratio (1h avg; DRY default 0)
 - logs/prom/halu.prom:8:# TYPE daegis_halu_eval_pass_ratio_1h gauge
 - logs/prom/halu.prom:9:daegis_halu_eval_pass_ratio_1h 0
 - logs/prom/halu.prom:10:# HELP daegis_halu_eval_cases_1h Cases (1h total; DRY default 0)
 - logs/prom/halu.prom:11:# TYPE daegis_halu_eval_cases_1h gauge
 - logs/prom/halu.prom:12:daegis_halu_eval_cases_1h{status="total"} 0
 - logs/prom/halu.prom:13:# HELP daegis_halu_eval_cases_24h Cases (24h total; DRY default 0)
 - logs/prom/halu.prom:14:# TYPE daegis_halu_eval_cases_24h gauge
 - logs/prom/halu.prom:15:daegis_halu_eval_cases_24h{status="total"} 2.0256410256410255
 - logs/prom/halu.prom:16:# HELP daegis_halu_info meta
 - logs/prom/halu.prom:17:# TYPE daegis_halu_info gauge
 - logs/prom/halu.prom:18:daegis_halu_info{source="sentry",mode="DRY"} 1
 - bin/memory_metrics.sh:12:  ["Halu"]="$BASE/Relay Halu.md"
 - brief.md:6:- Slack Slash â†’ FastAPI(slack2mqtt) â†’ MQTT â†’ Halu / Oracle ãŒç¨¼åƒã€‚Cloudflare Tunnel `bridge` ã§DNSç¢ºå®šã€‚
 - scripts/guardian/window_route_via_halu.sh:10:# A) ã¾ãšHaluã®busã«ã€Œé€šéã€ã‚’1è¡Œè¨˜éŒ²ï¼ˆWORMï¼‰
 - scripts/halu:14:  sentry           - Haluæœ€å°SOTã®å­˜åœ¨/é®®åº¦ãƒã‚§ãƒƒã‚¯ â†’ :9091 é¡å‡º
 - scripts/halu:15:  route <card.md>  - Garden Gateã‚«ãƒ¼ãƒ‰ã‚’HaluçµŒç”±ã§é€ä¿¡ï¼ˆbus.jsonlã«è¨˜éŒ²ï¼‰
 - scripts/halu:16:  emit             - Haluã®promè¡Œã‚’ç”Ÿæˆ/è£œå®Œï¼ˆemit_halu_prom.sh ãŒã‚ã‚Œã°å®Ÿè¡Œï¼‰
 - scripts/halu:45:      echo "# Halu Audit (${ts})"
 - scripts/halu:54:      echo "## 2) ãƒªãƒã‚¸ãƒˆãƒªå†…ã® Halu é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ‘ã‚¹ã ã‘ï¼‰"
 - scripts/halu:56:        (cd "$ROOT" && rg -n --hidden --no-messages 'Halu|daegis_halu' || true) | sed 's/^/ - /' | head -n 80
 - scripts/halu:58:        (cd "$ROOT" && grep -RIn --exclude-dir='.git' -E 'Halu|daegis_halu' . 2>/dev/null || true) | sed 's/^/ - /' | head -n 80
 - scripts/halu:62:      (curl -fsS localhost:9091/metrics 2>/dev/null | grep -E '^daegis_halu_|^# HELP daegis_halu_' | head -n 30) 2>/dev/null \
 - scripts/halu:80:    (curl -fsS localhost:9091/metrics 2>/dev/null | grep -E '^daegis_halu_(sentry_ok|textfile_age_seconds|eval_)' || echo "(none)")
 - scripts/halu:95:    ( cd "$PUB" && git add docs/agents/halu/agent.md && git commit -m "mirror: update Halu agent canon" ) || true
 - scripts/ops/emit_halu_prom.sh:14:  echo '# HELP daegis_halu_eval_pass_ratio_1h Halu pass ratio (1h avg)'
 - scripts/ops/emit_halu_prom.sh:15:  echo '# TYPE daegis_halu_eval_pass_ratio_1h gauge'
 - scripts/ops/emit_halu_prom.sh:16:  printf 'daegis_halu_eval_pass_ratio_1h %s\n' "${pass}"
 - scripts/ops/emit_halu_prom.sh:18:  echo '# HELP daegis_halu_eval_cases_1h Cases in 1h by status (approx, DRY)'
 - scripts/ops/emit_halu_prom.sh:19:  echo '# TYPE daegis_halu_eval_cases_1h gauge'
 - scripts/ops/emit_halu_prom.sh:20:  printf 'daegis_halu_eval_cases_1h{status="total"} %s\n' "${case_pass_1h}"
 - scripts/ops/emit_halu_prom.sh:22:  echo '# HELP daegis_halu_eval_cases_24h Cases in 24h by status (approx, DRY)'
 - scripts/ops/emit_halu_prom.sh:23:  echo '# TYPE daegis_halu_eval_cases_24h gauge'
 - scripts/ops/emit_halu_prom.sh:24:  printf 'daegis_halu_eval_cases_24h{status="total"} %s\n' "${case_pass_24h}"
 - scripts/ops/emit_halu_prom.sh:26:  echo '# HELP daegis_halu_info meta'
 - scripts/ops/emit_halu_prom.sh:27:  echo '# TYPE daegis_halu_info gauge'
 - scripts/ops/emit_halu_prom.sh:28:  printf 'daegis_halu_info{source="mirror_9090",mode="DRY"} 1\n'
 - scripts/ops/halu_sentry.sh:20:  echo '# HELP daegis_halu_sentry_ok 1=healthy 0=problem'
 - scripts/ops/halu_sentry.sh:21:  echo '# TYPE daegis_halu_sentry_ok gauge'
 - scripts/ops/halu_sentry.sh:22:  echo "daegis_halu_sentry_ok ${ok}"
 - scripts/ops/halu_sentry.sh:23:  echo '# HELP daegis_halu_textfile_age_seconds seconds since halu.prom last write'
 - scripts/ops/halu_sentry.sh:24:  echo '# TYPE daegis_halu_textfile_age_seconds gauge'
