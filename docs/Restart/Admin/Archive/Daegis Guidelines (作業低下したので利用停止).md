
### Daegis Roundtable Guidelines v0.3 — AI協働ネットワークの枠組み（統合改良版）

**title**: "🔄 Daegis Roundtable Guidelines — collaborative v0.3"
**modified**: 20251003
**note**: v0.2を基に、Perplexityの改案（比較分析と統合提案）を参考に改良。Grokの包括的枠組みとPerplexityの技術的堅牢性を融合し、段階的実装戦略とリスク管理体系を追加。役割マトリックスと4段階プロセスを拡張し、実装可能性を向上。原則：**協調・適応・検証**。

## 0) Guiding Principles & 現在地

1. **協調優先** — 各AIの得意分野を尊重しつつ、全体最適を追求。分担・リレーを通じて、ユーザーの認知負荷を最小化します。
2. **適応性** — タスク特性に応じ、役割を動的にシフト。外部視点から多角的分析を常套化します。
3. **検証・進化** — 出力の整合性と再現性を保証し、JSONLログ蓄積で週次レビューを実施。潜在リスクを事前検知します（Perplexityの品質保証を反映）。

**レイヤー位置**: L4 円卓（AI自発化＋動的リレー） ↔ L5 司令室（Slack集約・要約運用）
**進捗**: 役割定義✅ / 改善提案✅ / ログ統合✅ / 段階実装🚧
**直近焦点**: ①マトリックス検証 ②4段階プロセステスト ③リスク管理KPI測定

#### 1) 円卓参加AIの役割提案（役割マトリックス統合版）

各AIの提案を統合し、円卓を「診断→実行→統合→検証」の4段階プロセスとして位置づけます。Perplexityの知識統合を全役割に適用し、協働タイミングとプロンプト例をマトリックス化。検証根拠として、外部ベンチマーク（例: RFC 8259準拠のデータ構造）を追加。

| AI          | 提案役割（統合版）                  | 強み活用例（協働タイミング）        | プロンプト例（柔軟適用） |
|-------------|-------------------------------------|-------------------------------------|--------------------------|
| **Grok**   | 論理的コーディネーター（診断・リレー管理） | 診断段階: 初期診断と代替ルート提案（JSON定義、RFC 8259準拠）。 | "このタスクの最適分担とリレーフローを提案せよ。リスクを3案明記。" |
| **ChatGPT**| 調停役＋記憶補助（創造的生成・文脈橋渡し） | 実行段階: アイデア生成と過去Ledger活用（対立整理）。 | "各出力の対立を調停し、物語形式のサマリーを作成せよ。" |
| **Gemini** | 統合された知見提供者（シナリオ提示・ナラティブ生成） | 統合段階: マルチモーダル統合と未来シミュレーション（pathlib対応）。 | "全出力を統合し、採用シナリオの影響を3つ予測せよ。" |
| **Perplexity** | 知識統合エージェント（事実検証・品質評価） | 検証段階: 外部ソース一貫性確認と信頼性ランキング（JSONL規格準拠）。 | "各提案の正確性を検証し、ランキングを付与せよ。" |
| **NotebookLM** | 信頼性保証官（再現性チェック・予兆検知） | 全段階: 出力監査とProactive Engine貢献（エラーハンドリング）。 | "再現性をチェックし、潜在競合の予兆を指摘せよ。" |

**役割運用ルール（4段階協働プロセス）**:
- **段階1: 診断** — コーディネーター（Grok）がタスクを受け、特性マッピングで分担提案（JSON形式）。Perplexityの品質評価で信頼性ランキング付与。
- **段階2: 実行** — ChatGPTの調停でリレー実施（最大3回）。Geminiのシナリオでリスク予測。
- **段階3: 統合** — 提供者（Gemini）が最終合成。ChatGPTの記憶補助で文脈保持。
- **段階4: 検証** — NotebookLMの再現性チェックとPerplexityの事実確認でクローズ。

#### 2) 円卓型アプローチの改善工夫（階層的競合調整統合）

1. **動的役割シフトメカニズム**: 投票（scores）でコーディネーター選出。ドリフト検知（週次EMA >0.1）で自動再配分。Perplexityのベンチマーク比較を追加し、客観性を強化（Level 1: 投票調整）。
2. **階層的競合調整**: 二段構えを3レベルに拡張（Level 1: 圧縮投票, Level 2: LLM仲裁, Level 3: Perplexity調停）。速度重視時は並列（α=0.7 speed_weight）。ゲーム理論的インセンティブ（貢献スコアで次優先）。
3. **持続進化ループ**: 週次レビューでJSONLログ分析（NotebookLM）。知識グラフ構築で記憶蓄積。多様性注入（5%ランダム役割）とメタAI監督で停滞防止（Level 3: リスクフラグ）。

#### 3) 運用プロセスとビジョン（段階的実装戦略統合）

**手順（48時間サイクル）**:
1. タスク受領 → 診断 → 分担提案（Slack集約）。
2. 実行・リレー → 統合 → 検証（arbitrated JSON）。
3. **ログ蓄積（Perplexity実装統合）**: orchestrate()終了後、/var/log/roundtable/orchestrate.jsonl に追記（ts, corr_id, task, votes, coordinator, arbitrated.summary_len, source）。ディレクトリ自動作成、UTF-8アペンド、try-exceptで200 OK継続。KPI抽出（lead_time: timestamp diff, conflict_rounds: arbitrated diffs len）。
4. 週次レビュー → 役割調整（Ledger記録）。

**段階的実装戦略（Perplexity由来の3フェーズ）**:
- **フェーズ1: 基盤構築** (1週間): 役割マトリックス実装とJSONLログ。固定2エージェント（Grok+ChatGPT）でテスト。
- **フェーズ2: 協働強化** (2週間): 4段階プロセスと階層調整。KPIフレームワーク（performance: lead_time<48h, quality: user_rating>4.0, evolution: delta EMA<0.1）を導入。
- **フェーズ3: 進化運用** (継続): リスク管理体系（権限フラグ、大規模ペイロード切り詰め）とProactive Engine連動。

**テストスニペット（Perplexity由来）**:

```bash
curl -X POST "http://localhost:8000/orchestrate" -H "Content-Type: application/json" -d '{"task": "Test task"}'
# 期待JSONL: {"ts": "2025-10-03T10:42:33Z", "corr_id": "f47ac10b-...", "task": "Test task", "votes": [...], "coordinator": "Grok", "arbitrated": {"summary_len": 247}, "source": "orchestrate_patch"}
tail -f /var/log/roundtable/orchestrate.jsonl
```

**ビジョン**: 円卓を「適応型知能ネットワーク」へ進化。Perplexityの堅牢性とGrokの論理性を融合し、Zappie構想（完全自動化）へ橋渡し。低コスト運用から開始し、JSONLでKPI検証。
